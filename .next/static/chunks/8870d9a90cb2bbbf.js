(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7670,4581,76397,e=>{"use strict";e.s(["default",0,function(){for(var e,t,s=0,a="",l=arguments.length;s<l;s++)(e=arguments[s])&&(t=function e(t){var s,a,l="";if("string"==typeof t||"number"==typeof t)l+=t;else if("object"==typeof t)if(Array.isArray(t)){var r=t.length;for(s=0;s<r;s++)t[s]&&(a=e(t[s]))&&(l&&(l+=" "),l+=a)}else for(a in t)t[a]&&(l&&(l+=" "),l+=a);return l}(e))&&(a&&(a+=" "),a+=t);return a}],7670);var t=e.i(71645);let s=e.i(47167).default.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:5000/api";async function a(e,t={}){let l=await fetch(`${s}${e}`,{headers:{"Content-Type":"application/json",...t.headers||{}},...t,cache:"no-store"});if(!l.ok)throw Error((await l.json().catch(()=>({}))).message||"Request failed");return 204===l.status?null:l.json()}let l={getProjects:()=>a("/projects"),createProject:e=>a("/projects",{method:"POST",body:JSON.stringify(e)}),updateProject:(e,t)=>a(`/projects/${e}`,{method:"PUT",body:JSON.stringify(t)}),updateProjectProgress:(e,t)=>a(`/projects/${e}/progress`,{method:"PATCH",body:JSON.stringify({progress:t})}),deleteProject:e=>a(`/projects/${e}`,{method:"DELETE"}),getTasks:e=>a(`/tasks/project/${e}`),createTask:e=>a("/tasks",{method:"POST",body:JSON.stringify(e)}),toggleTaskStatus:(e,t)=>a(`/tasks/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})}),updateTask:(e,t)=>a(`/tasks/${e}`,{method:"PATCH",body:JSON.stringify(t)}),deleteTask:e=>a(`/tasks/${e}`,{method:"DELETE"}),getTeamMembers:()=>a("/team-members"),createTeamMember:e=>a("/team-members",{method:"POST",body:JSON.stringify(e)}),updateTeamMember:(e,t)=>a(`/team-members/${e}`,{method:"PATCH",body:JSON.stringify(t)}),deleteTeamMember:e=>a(`/team-members/${e}`,{method:"DELETE"})};e.s(["api",0,l],4581);let r=e=>({...e,taskSummary:e.taskSummary??{total:0,completed:0}});function d(){let[e,s]=(0,t.useState)([]),[a,d]=(0,t.useState)([]),[i,n]=(0,t.useState)(!0),[c,o]=(0,t.useState)(()=>new Set);(0,t.useEffect)(()=>{let e=!1;return(async()=>{n(!0);try{let[t,a]=await Promise.all([l.getProjects(),l.getTeamMembers()]);e||(s(t.map(r)),d(a))}catch(e){console.error("Failed to load workspace data",e)}finally{e||n(!1)}})(),()=>{e=!0}},[]);let m=async()=>{d(await l.getTeamMembers())},x=async e=>{await l.createTeamMember(e),await m()};return{projects:e,teamMembers:a,loading:i,projectSyncing:c,handleProjectCreate:async e=>{let t=r(await l.createProject(e));return s(e=>[t,...e]),t},handleProjectDelete:async e=>{await l.deleteProject(e),s(t=>t.filter(t=>t._id!==e))},handleProgressUpdate:async(e,t)=>{o(t=>{let s=new Set(t);return s.add(e),s});try{let a=await l.updateProjectProgress(e,t);s(t=>t.map(t=>t._id===e?r({...t,...a}):t))}finally{o(t=>{let s=new Set(t);return s.delete(e),s})}},handleProjectHydrate:e=>{e&&s(t=>t.map(t=>t._id===e._id?r(e):t))},refreshTeam:m,handleTeamCreate:x}}e.s(["default",()=>d],76397)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},79002,e=>{"use strict";let t=(0,e.i(75254).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);e.s(["UserPlus",()=>t],79002)},22066,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(79002),l=e.i(31278),r=e.i(7670);function d({teamMembers:e=[],onCreate:d=async()=>{}}){let[i,n]=(0,s.useState)({name:"",role:"Architect",capacity:5}),[c,o]=(0,s.useState)(!1),m=async e=>{if(e.preventDefault(),i.name.trim())try{o(!0),await d(i),n({name:"",role:"Architect",capacity:5})}finally{o(!1)}};return(0,t.jsxs)("section",{className:"surface-card space-y-5",children:[(0,t.jsxs)("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-400",children:"Teams"}),(0,t.jsx)("h2",{className:"mt-2 text-2xl font-semibold text-slate-900",children:"Team workload"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"An at-a-glance overview of your team capacity and assigned tasks."})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 px-4 py-2 text-right",children:[(0,t.jsx)("p",{className:"text-[10px] uppercase tracking-[0.35em] text-slate-400",children:"Members"}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-slate-900",children:e.length})]})]}),(0,t.jsxs)("form",{onSubmit:m,className:"grid gap-3 rounded-2xl border border-slate-200 bg-slate-50/60 p-4 sm:grid-cols-2",children:[(0,t.jsxs)("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Full name",(0,t.jsx)("input",{placeholder:"Alex Chen",value:i.name,onChange:e=>n(t=>({...t,name:e.target.value}))})]}),(0,t.jsxs)("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Role",(0,t.jsx)("input",{placeholder:"Lead Architect",value:i.role,onChange:e=>n(t=>({...t,role:e.target.value}))})]}),(0,t.jsxs)("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Weekly capacity",(0,t.jsx)("input",{type:"number",min:1,max:10,value:String(i.capacity),onChange:e=>n(t=>({...t,capacity:Math.max(1,Number(e.target.value)||1)}))})]}),(0,t.jsx)("div",{className:"flex items-end justify-end",children:(0,t.jsxs)("button",{type:"submit",disabled:c,className:"btn-primary",children:[c?(0,t.jsx)(l.Loader2,{size:16,className:"animate-spin"}):(0,t.jsx)(a.UserPlus,{size:16}),c?"Adding":"Add member"]})})]}),(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:e.length?e.map(e=>{let s=Array.isArray(e.tasks)?e.tasks:[],a=e.capacity||5,l=s.length||e.taskCount||0,d=Math.min(100,Math.round(l/a*100));return(0,t.jsxs)("article",{className:"flex items-center gap-4 rounded-2xl border border-slate-200 bg-white p-4",children:[(0,t.jsx)("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-slate-100 text-lg font-semibold text-slate-700",children:((e="")=>{let[t="",s=""]=e.split(" ");return`${t.charAt(0)}${s.charAt(0)}`.toUpperCase()||e.charAt(0).toUpperCase()})(e.name)}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-slate-900",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:e.role})]}),(0,t.jsxs)("span",{className:(0,r.default)("status-pill text-xs",d<60?"bg-emerald-100 text-emerald-700":d<90?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-600"),children:[d,"% load"]})]}),(0,t.jsx)("div",{className:"mt-2 h-2 rounded-full bg-slate-100",children:(0,t.jsx)("div",{className:(0,r.default)("h-full rounded-full",d<60?"bg-emerald-500":d<90?"bg-amber-500":"bg-rose-500"),style:{width:`${Math.min(d,100)}%`}})}),(0,t.jsxs)("p",{className:"mt-1 text-xs text-slate-500",children:[l," / ",a," tasks"]})]})]},e._id)}):(0,t.jsx)("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-white px-4 py-8 text-center text-slate-500",children:"Add your core team to start tracking workload."})})]})}e.s(["default",()=>d])},44789,7233,27612,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(75254);let l=(0,a.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>l],7233);let r=(0,a.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),d=(0,a.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),i=(0,a.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>i],27612);var n=e.i(7670);let c={Planned:"bg-slate-100 text-slate-600","In Progress":"bg-blue-100 text-blue-700","At Risk":"bg-amber-100 text-amber-700",Completed:"bg-emerald-100 text-emerald-700",Cancelled:"bg-rose-100 text-rose-600"};function o({projects:e=[],selectedProjectId:a,onSelect:o=()=>{},onCreate:m=async()=>{},onDelete:x=()=>{},onProgressUpdate:u=async()=>{},busyProjectIds:p=new Set}){let[h,j]=(0,s.useState)({name:"",studio:"Core Studio",dueDate:"",color:"#1d4ed8"}),[b,f]=(0,s.useState)(!1),[g,y]=(0,s.useState)({}),[N,v]=(0,s.useState)(!1),[k,w]=(0,s.useState)(""),S=(0,s.useMemo)(()=>k.trim()?e.filter(e=>e.name?.toLowerCase().includes(k.trim().toLowerCase())):e,[e,k]),P=(0,s.useMemo)(()=>{if(!e.length)return{average:0,active:0,completed:0};let t=e.filter(e=>"Completed"===e.status).length,s=e.length-t;return{average:Math.round(e.reduce((e,t)=>e+(t.progress||0),0)/e.length),active:s,completed:t}},[e]),C=async e=>{if(e.preventDefault(),h.name.trim())try{v(!0),await m(h),j({name:"",studio:"Core Studio",dueDate:"",color:"#1d4ed8"}),f(!1)}finally{v(!1)}},T=async e=>{let t=g[e];if(void 0!==t)try{await u(e,t)}finally{y(t=>{let s={...t};return delete s[e],s})}};return(0,t.jsxs)("section",{className:"surface-card space-y-6",children:[(0,t.jsxs)("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-400",children:"Projects"}),(0,t.jsx)("h2",{className:"mt-2 text-3xl font-semibold text-slate-900",children:"Manage ongoing briefs"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Track each client engagement, progress, and handover dates in one place."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 px-4 py-2 text-right",children:[(0,t.jsx)("p",{className:"text-[10px] uppercase tracking-[0.35em] text-slate-400",children:"Active"}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-slate-900",children:P.active})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 px-4 py-2 text-right",children:[(0,t.jsx)("p",{className:"text-[10px] uppercase tracking-[0.35em] text-slate-400",children:"Avg. Progress"}),(0,t.jsxs)("p",{className:"text-2xl font-semibold text-slate-900",children:[P.average,"%"]})]}),(0,t.jsxs)("button",{type:"button",className:"btn-primary text-sm",onClick:()=>f(e=>!e),children:[(0,t.jsx)(l,{size:16}),b?"Close":"Add project"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,t.jsxs)("div",{className:"relative flex-1 min-w-[220px]",children:[(0,t.jsx)(r,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),(0,t.jsx)("input",{className:"w-full border-slate-200 pl-10",placeholder:"Search projects",value:k,onChange:e=>w(e.target.value)})]}),(0,t.jsxs)("button",{type:"button",className:"btn-secondary text-sm",children:[(0,t.jsx)(d,{size:16}),"Filter"]})]}),(0,t.jsx)("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white",children:(0,t.jsxs)("table",{className:"table-card text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Project name"}),(0,t.jsx)("th",{children:"Status"}),(0,t.jsx)("th",{children:"Progress"}),(0,t.jsx)("th",{children:"Tasks"}),(0,t.jsx)("th",{children:"Due"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsx)("tbody",{children:S.length?S.map(e=>{var s;let l=e._id===a,r=g[e._id]??e.progress??0,d=p?.has?.(e._id)??!1;return(0,t.jsxs)("tr",{className:(0,n.default)("cursor-pointer transition hover:bg-slate-50",l&&"bg-slate-50"),onClick:()=>o(e._id),children:[(0,t.jsxs)("td",{children:[(0,t.jsx)("div",{className:"font-semibold text-slate-900",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:e.studio||"Studio TBD"})]}),(0,t.jsx)("td",{children:(0,t.jsx)("span",{className:(0,n.default)("status-pill",c[e.status]||"bg-slate-100 text-slate-600"),children:e.status})}),(0,t.jsxs)("td",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"h-2 flex-1 rounded-full bg-slate-100",children:(0,t.jsx)("div",{className:"h-full rounded-full bg-blue-500",style:{width:`${r}%`}})}),(0,t.jsxs)("span",{className:"w-12 text-right text-xs text-slate-500",children:[r,"%"]})]}),(0,t.jsx)("input",{type:"range",min:0,max:100,value:r,onChange:t=>{var s,a;return s=e._id,a=Number(t.target.value),void y(e=>({...e,[s]:a}))},onMouseUp:()=>T(e._id),onTouchEnd:()=>T(e._id),className:"mt-2 w-full accent-blue-500"}),d&&(0,t.jsx)("p",{className:"text-xs text-blue-500",children:"Updating…"})]}),(0,t.jsxs)("td",{children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-slate-900",children:[e.taskSummary?.completed||0,"/",e.taskSummary?.total||0]}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:"tasks complete"})]}),(0,t.jsx)("td",{children:(0,t.jsx)("p",{className:"text-sm text-slate-900",children:(s=e.dueDate)?new Intl.DateTimeFormat("en",{month:"short",day:"numeric"}).format(new Date(s)):"No deadline"})}),(0,t.jsx)("td",{children:(0,t.jsx)("button",{type:"button",onClick:t=>{t.stopPropagation(),x(e._id)},className:"rounded-full border border-slate-200 p-2 text-slate-400 hover:border-rose-200 hover:text-rose-500",children:(0,t.jsx)(i,{size:14})})})]},e._id)}):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"py-10 text-center text-slate-500",children:"No projects yet. Use the button above to add your first project."})})})]})}),b&&(0,t.jsxs)("form",{id:"project-create",onSubmit:C,className:"grid gap-4 rounded-2xl border border-slate-200 bg-slate-50/60 p-5 md:grid-cols-2",children:[(0,t.jsxs)("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Project name",(0,t.jsx)("input",{required:!0,placeholder:"Seaside Villa",value:h.name,onChange:e=>j(t=>({...t,name:e.target.value}))})]}),(0,t.jsxs)("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Studio",(0,t.jsx)("input",{placeholder:"Core Studio",value:h.studio,onChange:e=>j(t=>({...t,studio:e.target.value}))})]}),(0,t.jsxs)("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Due date",(0,t.jsx)("input",{type:"date",value:h.dueDate,onChange:e=>j(t=>({...t,dueDate:e.target.value}))})]}),(0,t.jsxs)("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Accent color",(0,t.jsx)("input",{type:"color",className:"h-11 cursor-pointer rounded-xl border border-slate-200",value:h.color,onChange:e=>j(t=>({...t,color:e.target.value}))})]}),(0,t.jsx)("div",{className:"md:col-span-2 flex justify-end",children:(0,t.jsxs)("button",{type:"submit",disabled:N,className:"btn-primary",children:[(0,t.jsx)(l,{size:16}),N?"Creating…":"Create project"]})})]})]})}e.s(["default",()=>o],44789)},81694,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(44789),l=e.i(75254);let r=(0,l.default)("badge-check",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var d=e.i(31278),i=e.i(7233),n=e.i(27612),c=e.i(7670),o=e.i(4581);let m={High:"text-rose-600 bg-rose-50 border border-rose-100",Medium:"text-amber-600 bg-amber-50 border border-amber-100",Low:"text-emerald-600 bg-emerald-50 border border-emerald-100"};function x({project:e,teamMembers:a=[],onProjectUpdate:l,onTeamRefresh:x=()=>{}}){let[u,p]=(0,s.useState)([]),[h,j]=(0,s.useState)(!1),[b,f]=(0,s.useState)({name:"",assigneeId:"",priority:"Medium"}),[g,y]=(0,s.useState)(!1),[N,v]=(0,s.useState)(null);(0,s.useEffect)(()=>{let t=!1;return(async()=>{if(!e?._id)return p([]);j(!0);try{let s=await o.api.getTasks(e._id);t||p(s)}catch(e){console.error("Failed to load tasks",e)}finally{t||j(!1)}})(),()=>{t=!0}},[e?._id]);let k=(0,s.useMemo)(()=>({completed:u.filter(e=>"Complete"===e.status).length,total:u.length}),[u]),w=(e,t)=>{if(!e||!l)return;let s=t.filter(e=>"Complete"===e.status).length;l({...e,taskSummary:{total:t.length,completed:s}})},S=async t=>{if(t.preventDefault(),e?._id&&b.name.trim())try{y(!0);let t={name:b.name,projectId:e._id,assigneeId:b.assigneeId||void 0,priority:b.priority},{task:s,project:a}=await o.api.createTask(t);p(e=>{let t=[s,...e];return w(a,t),t}),x(),f({name:"",assigneeId:"",priority:"Medium"})}catch(e){console.error("Failed to create task",e)}finally{y(!1)}},P=async e=>{try{v(e._id);let t="Complete"===e.status?"Incomplete":"Complete",{task:s,project:a}=await o.api.toggleTaskStatus(e._id,t);p(t=>{let l=t.map(t=>t._id===e._id?s:t);return w(a,l),l}),x()}catch(e){console.error("Failed to toggle task",e)}finally{v(null)}},C=async e=>{try{v(e._id);let{project:t}=await o.api.deleteTask(e._id);p(s=>{let a=s.filter(t=>t._id!==e._id);return w(t,a),a}),x()}catch(e){console.error("Failed to delete task",e)}finally{v(null)}};return(0,t.jsxs)("section",{className:"surface-card space-y-5",children:[(0,t.jsxs)("header",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-400",children:"Tasks"}),(0,t.jsx)("h2",{className:"mt-2 text-2xl font-semibold text-slate-900",children:e?e.name:"Select a project"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:e?`Client deliverables due ${e.dueDate?new Date(e.dueDate).toLocaleDateString():"TBD"}.`:"Pick a project from the list to see and manage its tasks."})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-slate-200 px-4 py-2 text-right",children:[(0,t.jsx)("p",{className:"text-[10px] uppercase tracking-[0.35em] text-slate-400",children:"Complete"}),(0,t.jsxs)("p",{className:"text-2xl font-semibold text-slate-900",children:[k.completed,"/",k.total]})]})]}),(0,t.jsxs)("form",{onSubmit:S,className:"grid gap-3 rounded-2xl border border-slate-200 bg-slate-50/60 p-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Task name",(0,t.jsx)("input",{placeholder:"Draft initial blueprints",value:b.name,onChange:e=>f(t=>({...t,name:e.target.value})),disabled:!e})]}),(0,t.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,t.jsxs)("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Priority",(0,t.jsx)("select",{value:b.priority,onChange:e=>f(t=>({...t,priority:e.target.value})),disabled:!e,children:["High","Medium","Low"].map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Assignee",(0,t.jsxs)("select",{value:b.assigneeId,onChange:e=>f(t=>({...t,assigneeId:e.target.value})),disabled:!e,children:[(0,t.jsx)("option",{value:"",children:"Unassigned"}),a.map(e=>(0,t.jsx)("option",{value:e._id,children:e.name},e._id))]})]})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)("button",{type:"submit",className:"btn-primary",disabled:g||!e,children:[g?(0,t.jsx)(d.Loader2,{size:16,className:"animate-spin"}):(0,t.jsx)(i.Plus,{size:16}),g?"Adding":"Add task"]})})]}),(0,t.jsx)("div",{className:"space-y-3",children:h?(0,t.jsx)("div",{className:"flex h-32 items-center justify-center rounded-2xl border border-slate-200 bg-white text-slate-400",children:(0,t.jsx)(d.Loader2,{className:"animate-spin"})}):u.length?u.map(e=>(0,t.jsxs)("article",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-slate-200 bg-white px-4 py-3",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>P(e),className:(0,c.default)("rounded-full border p-1","Complete"===e.status?"border-emerald-400 bg-emerald-50 text-emerald-600":"border-slate-200 text-slate-400"),children:N===e._id?(0,t.jsx)(d.Loader2,{size:16,className:"animate-spin"}):(0,t.jsx)(r,{size:16})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:(0,c.default)("font-semibold","Complete"===e.status?"text-slate-400 line-through":"text-slate-900"),children:e.name}),(0,t.jsxs)("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-xs text-slate-500",children:[(0,t.jsxs)("span",{className:(0,c.default)("status-pill border px-3 py-1",m[e.priority]),children:[e.priority," priority"]}),(0,t.jsx)("span",{children:e.assignee?.name||"Unassigned"})]})]})]})}),(0,t.jsx)("button",{type:"button",onClick:()=>C(e),className:"rounded-full border border-slate-200 p-2 text-slate-400 hover:border-rose-200 hover:text-rose-500",disabled:N===e._id,children:(0,t.jsx)(n.Trash2,{size:16})})]},e._id)):(0,t.jsx)("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-white px-4 py-8 text-center text-slate-500",children:e?"No tasks for this project yet.":"Select a project to see its tasks."})})]})}var u=e.i(22066);let p=(0,l.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),h=(0,l.default)("calendar-clock",[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]),j=(0,l.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);function b({projects:e=[],teamMembers:s=[]}){let a=Date.now(),l=a+6048e5,r=e.filter(e=>e?.dueDate&&new Date(e.dueDate).getTime()<a&&"Completed"!==e.status).sort((e,t)=>new Date(e.dueDate)-new Date(t.dueDate)),d=e.filter(e=>{if(!e?.dueDate||"Completed"===e.status)return!1;let t=new Date(e.dueDate).getTime();return t>=a&&t<=l}).sort((e,t)=>new Date(e.dueDate)-new Date(t.dueDate)),i=s.map(e=>({...e,computedWorkload:(e=>{if("number"==typeof e?.workload)return Math.round(e.workload);let t=e?.capacity||5;return Math.min(100,Math.round(((Array.isArray(e?.tasks)?e.tasks.length:e?.taskCount||0)||0)/t*100))})(e)})).filter(e=>e.computedWorkload>=90).sort((e,t)=>t.computedWorkload-e.computedWorkload),n=[{label:"Overdue briefs",value:r.length,icon:p,accent:"text-rose-600",tone:"bg-rose-50 border-rose-100"},{label:"Due this week",value:d.length,icon:h,accent:"text-amber-600",tone:"bg-amber-50 border-amber-100"},{label:"Capacity alerts",value:i.length,icon:j,accent:"text-blue-600",tone:"bg-blue-50 border-blue-100"}];return(0,t.jsxs)("section",{className:"surface-card space-y-5",children:[(0,t.jsxs)("header",{children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-400",children:"Insights"}),(0,t.jsx)("h2",{className:"mt-2 text-2xl font-semibold text-slate-900",children:"Studio pulse"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"auto-generated alerts from live project data."})]}),(0,t.jsx)("div",{className:"grid gap-3 sm:grid-cols-3",children:n.map(e=>{let s=e.icon;return(0,t.jsxs)("article",{className:(0,c.default)("rounded-2xl border px-4 py-3",e.tone,"flex items-center gap-3 text-sm font-semibold"),children:[(0,t.jsx)(s,{size:18,className:e.accent}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:e.label}),(0,t.jsx)("p",{className:(0,c.default)("text-2xl",e.accent),children:e.value})]})]},e.label)})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("section",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"font-semibold text-slate-900",children:"Delivery timeline"}),(0,t.jsx)("span",{className:"text-xs text-slate-500",children:"Next 7 days"})]}),(0,t.jsx)("div",{className:"mt-3 space-y-3",children:d.length||r.length?[...r,...d].slice(0,4).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-slate-900",children:e.name}),(0,t.jsxs)("p",{className:"text-xs text-slate-500",children:["Due ",(e=>{if(!e)return"No due date";try{return new Intl.DateTimeFormat("en",{month:"short",day:"numeric"}).format(new Date(e))}catch(e){return"No due date"}})(e.dueDate)]})]}),(0,t.jsxs)("span",{className:"text-xs font-semibold text-slate-500",children:[e.taskSummary?.completed||0,"/",e.taskSummary?.total||0," tasks"]})]},e._id)):(0,t.jsx)("p",{className:"rounded-xl border border-dashed border-slate-300 px-3 py-4 text-center text-sm text-slate-500",children:"All upcoming deadlines are on track."})})]}),(0,t.jsxs)("section",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"font-semibold text-slate-900",children:"Capacity watchlist"}),(0,t.jsx)("span",{className:"text-xs text-slate-500",children:"Target < 90%"})]}),(0,t.jsx)("div",{className:"mt-3 space-y-3",children:i.length?i.slice(0,4).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-slate-900",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:e.role})]}),(0,t.jsxs)("span",{className:"rounded-full bg-rose-100 px-3 py-1 text-xs font-semibold text-rose-600",children:[e.computedWorkload,"% load"]})]},e._id)):(0,t.jsx)("p",{className:"rounded-xl border border-dashed border-slate-300 px-3 py-4 text-center text-sm text-slate-500",children:"No team members are over capacity."})})]})]})]})}var f=e.i(76397);function g(){let[e,l]=(0,s.useState)(null);const{projects:r,teamMembers:d,loading:i,projectSyncing:n,handleProjectCreate:c,handleProjectDelete:o,handleProgressUpdate:m,handleProjectHydrate:p,refreshTeam:h,handleTeamCreate:j}=(0,f.default)();(0,s.useEffect)(()=>{if(!r.length){null!==e&&l(null);return}r.some(t=>t._id===e)||l(r[0]._id)},[r,e]);const g=async e=>{let t=await c(e);l(t?._id??null)},y=async e=>{await o(e)},N=j;let v=(0,s.useMemo)(()=>r.length?r.find(t=>t._id===e)??r[0]:null,[r,e]),k=(0,s.useMemo)(()=>{let e=r.length,t=r.filter(e=>"Completed"===e.status).length,s=r.reduce((e,t)=>e+(t.taskSummary?.total||0),0),a=Date.now(),l=a+6048e5;return{totalProjects:e,active:e-t,completed:t,tasks:s,dueSoon:r.filter(e=>{if(!e?.dueDate||"Completed"===e.status)return!1;let t=new Date(e.dueDate).getTime();return t>=a&&t<=l}).length,studios:new Set(r.map(e=>e.studio).filter(Boolean)).size}},[r]),w=(0,s.useMemo)(()=>[{label:"Projects",value:k.totalProjects,caption:"Total in studio"},{label:"Active",value:k.active,caption:"Currently in delivery"},{label:"Completed",value:k.completed,caption:"Shipped this quarter"},{label:"Due this week",value:k.dueSoon,caption:"Need follow-up"}],[k]);const g=async e=>{let t=normalizeProject(await api.createProject(e));setProjects(e=>[t,...e]),l(t._id)},y=async t=>{let s=r.find(e=>e._id===t);if(!s||!window.confirm(`Delete ${s.name}? Tasks for this project will also be removed.`))return;await api.deleteProject(t);let a=e===t;setProjects(e=>{let s=e.filter(e=>e._id!==t);return a&&l(s[0]?._id??null),s})},m=async(e,t)=>{setProjectSyncing(t=>{let s=new Set(t);return s.add(e),s});try{let s=await api.updateProjectProgress(e,t);setProjects(t=>t.map(t=>t._id===e?normalizeProject({...t,...s}):t))}finally{setProjectSyncing(t=>{let s=new Set(t);return s.delete(e),s})}},p=e=>{e&&setProjects(t=>t.map(t=>t._id===e._id?normalizeProject(e):t))},h=async()=>{setTeamMembers(await api.getTeamMembers())},N=async e=>{await api.createTeamMember(e),await h()};return i?(0,t.jsx)("main",{className:"flex min-h-screen items-center justify-center text-slate-400",children:(0,t.jsxs)("div",{className:"space-y-2 text-center",children:[(0,t.jsx)("p",{className:"text-sm uppercase tracking-[0.3em]",children:"Loading studio"}),(0,t.jsx)("div",{className:"h-1 w-40 overflow-hidden rounded-full bg-white/10",children:(0,t.jsx)("div",{className:"h-full w-1/2 animate-pulse rounded-full bg-sky-400"})})]})}):(0,t.jsxs)("main",{className:"space-y-8",children:[(0,t.jsxs)("header",{className:"surface-card space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-400",children:"Dashboard"}),(0,t.jsx)("h1",{className:"mt-2 text-3xl font-semibold text-slate-900",children:"Arch studio overview"}),(0,t.jsx)("p",{className:"text-sm text-slate-500",children:"Manage and track all your firm’s projects, tasks, and teams in one calm workspace."})]}),(0,t.jsx)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:w.map(e=>(0,t.jsxs)("article",{className:"rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3",children:[(0,t.jsx)("p",{className:"text-[11px] uppercase tracking-[0.35em] text-slate-400",children:e.label}),(0,t.jsx)("p",{className:"mt-2 text-2xl font-semibold text-slate-900",children:e.value??0}),(0,t.jsx)("p",{className:"text-xs text-slate-500",children:e.caption})]},e.label))})]}),(0,t.jsx)(a.default,{projects:r,selectedProjectId:e,onSelect:l,onCreate:g,onDelete:y,onProgressUpdate:m,busyProjectIds:n}),(0,t.jsxs)("section",{className:"grid gap-6 xl:grid-cols-[1.1fr_0.9fr]",children:[(0,t.jsx)(x,{project:v,teamMembers:d,onProjectUpdate:p,onTeamRefresh:h}),(0,t.jsx)(b,{projects:r,teamMembers:d})]}),(0,t.jsx)(u.default,{teamMembers:d,onCreate:N})]})}e.s(["default",()=>g],81694)}]);