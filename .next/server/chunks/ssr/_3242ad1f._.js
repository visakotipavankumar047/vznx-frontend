module.exports=[98621,98474,45227,a=>{"use strict";a.s(["default",0,function(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d}],98621);var b=a.i(72131);let c=process.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:5000/api";async function d(a,b={}){let e=await fetch(`${c}${a}`,{headers:{"Content-Type":"application/json",...b.headers||{}},...b,cache:"no-store"});if(!e.ok)throw Error((await e.json().catch(()=>({}))).message||"Request failed");return 204===e.status?null:e.json()}let e={getProjects:()=>d("/projects"),createProject:a=>d("/projects",{method:"POST",body:JSON.stringify(a)}),updateProject:(a,b)=>d(`/projects/${a}`,{method:"PUT",body:JSON.stringify(b)}),updateProjectProgress:(a,b)=>d(`/projects/${a}/progress`,{method:"PATCH",body:JSON.stringify({progress:b})}),deleteProject:a=>d(`/projects/${a}`,{method:"DELETE"}),getTasks:a=>d(`/tasks/project/${a}`),createTask:a=>d("/tasks",{method:"POST",body:JSON.stringify(a)}),toggleTaskStatus:(a,b)=>d(`/tasks/${a}/status`,{method:"PATCH",body:JSON.stringify({status:b})}),updateTask:(a,b)=>d(`/tasks/${a}`,{method:"PATCH",body:JSON.stringify(b)}),deleteTask:a=>d(`/tasks/${a}`,{method:"DELETE"}),getTeamMembers:()=>d("/team-members"),createTeamMember:a=>d("/team-members",{method:"POST",body:JSON.stringify(a)}),updateTeamMember:(a,b)=>d(`/team-members/${a}`,{method:"PATCH",body:JSON.stringify(b)}),deleteTeamMember:a=>d(`/team-members/${a}`,{method:"DELETE"})};a.s(["api",0,e],98474);let f=a=>({...a,taskSummary:a.taskSummary??{total:0,completed:0}});function g(){let[a,c]=(0,b.useState)([]),[d,g]=(0,b.useState)([]),[h,i]=(0,b.useState)(!0),[j,k]=(0,b.useState)(()=>new Set);(0,b.useEffect)(()=>{let a=!1;return(async()=>{i(!0);try{let[b,d]=await Promise.all([e.getProjects(),e.getTeamMembers()]);a||(c(b.map(f)),g(d))}catch(a){console.error("Failed to load workspace data",a)}finally{a||i(!1)}})(),()=>{a=!0}},[]);let l=async()=>{g(await e.getTeamMembers())},m=async a=>{await e.createTeamMember(a),await l()};return{projects:a,teamMembers:d,loading:h,projectSyncing:j,handleProjectCreate:async a=>{let b=f(await e.createProject(a));return c(a=>[b,...a]),b},handleProjectDelete:async a=>{await e.deleteProject(a),c(b=>b.filter(b=>b._id!==a))},handleProgressUpdate:async(a,b)=>{k(b=>{let c=new Set(b);return c.add(a),c});try{let d=await e.updateProjectProgress(a,b);c(b=>b.map(b=>b._id===a?f({...b,...d}):b))}finally{k(b=>{let c=new Set(b);return c.delete(a),c})}},handleProjectHydrate:a=>{a&&c(b=>b.map(b=>b._id===a._id?f(a):b))},refreshTeam:l,handleTeamCreate:m}}a.s(["default",()=>g],45227)},96221,a=>{"use strict";let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},17371,a=>{"use strict";let b=(0,a.i(70106).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);a.s(["UserPlus",()=>b],17371)},19429,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(17371),e=a.i(96221),f=a.i(98621);function g({teamMembers:a=[],onCreate:g=async()=>{}}){let[h,i]=(0,c.useState)({name:"",role:"Architect",capacity:5}),[j,k]=(0,c.useState)(!1),l=async a=>{if(a.preventDefault(),h.name.trim())try{k(!0),await g(h),i({name:"",role:"Architect",capacity:5})}finally{k(!1)}};return(0,b.jsxs)("section",{className:"surface-card space-y-5",children:[(0,b.jsxs)("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-400",children:"Teams"}),(0,b.jsx)("h2",{className:"mt-2 text-2xl font-semibold text-slate-900",children:"Team workload"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"An at-a-glance overview of your team capacity and assigned tasks."})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 px-4 py-2 text-right",children:[(0,b.jsx)("p",{className:"text-[10px] uppercase tracking-[0.35em] text-slate-400",children:"Members"}),(0,b.jsx)("p",{className:"text-2xl font-semibold text-slate-900",children:a.length})]})]}),(0,b.jsxs)("form",{onSubmit:l,className:"grid gap-3 rounded-2xl border border-slate-200 bg-slate-50/60 p-4 sm:grid-cols-2",children:[(0,b.jsxs)("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Full name",(0,b.jsx)("input",{placeholder:"Alex Chen",value:h.name,onChange:a=>i(b=>({...b,name:a.target.value}))})]}),(0,b.jsxs)("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Role",(0,b.jsx)("input",{placeholder:"Lead Architect",value:h.role,onChange:a=>i(b=>({...b,role:a.target.value}))})]}),(0,b.jsxs)("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Weekly capacity",(0,b.jsx)("input",{type:"number",min:1,max:10,value:String(h.capacity),onChange:a=>i(b=>({...b,capacity:Math.max(1,Number(a.target.value)||1)}))})]}),(0,b.jsx)("div",{className:"flex items-end justify-end",children:(0,b.jsxs)("button",{type:"submit",disabled:j,className:"btn-primary",children:[j?(0,b.jsx)(e.Loader2,{size:16,className:"animate-spin"}):(0,b.jsx)(d.UserPlus,{size:16}),j?"Adding":"Add member"]})})]}),(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:a.length?a.map(a=>{let c=Array.isArray(a.tasks)?a.tasks:[],d=a.capacity||5,e=c.length||a.taskCount||0,g=Math.min(100,Math.round(e/d*100));return(0,b.jsxs)("article",{className:"flex items-center gap-4 rounded-2xl border border-slate-200 bg-white p-4",children:[(0,b.jsx)("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-slate-100 text-lg font-semibold text-slate-700",children:((a="")=>{let[b="",c=""]=a.split(" ");return`${b.charAt(0)}${c.charAt(0)}`.toUpperCase()||a.charAt(0).toUpperCase()})(a.name)}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-slate-900",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:a.role})]}),(0,b.jsxs)("span",{className:(0,f.default)("status-pill text-xs",g<60?"bg-emerald-100 text-emerald-700":g<90?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-600"),children:[g,"% load"]})]}),(0,b.jsx)("div",{className:"mt-2 h-2 rounded-full bg-slate-100",children:(0,b.jsx)("div",{className:(0,f.default)("h-full rounded-full",g<60?"bg-emerald-500":g<90?"bg-amber-500":"bg-rose-500"),style:{width:`${Math.min(g,100)}%`}})}),(0,b.jsxs)("p",{className:"mt-1 text-xs text-slate-500",children:[e," / ",d," tasks"]})]})]},a._id)}):(0,b.jsx)("div",{className:"rounded-2xl border border-dashed border-slate-300 bg-white px-4 py-8 text-center text-slate-500",children:"Add your core team to start tracking workload."})})]})}a.s(["default",()=>g])},3043,15618,81560,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(70106);let e=(0,d.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>e],15618);let f=(0,d.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),g=(0,d.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),h=(0,d.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);a.s(["Trash2",()=>h],81560);var i=a.i(98621);let j={Planned:"bg-slate-100 text-slate-600","In Progress":"bg-blue-100 text-blue-700","At Risk":"bg-amber-100 text-amber-700",Completed:"bg-emerald-100 text-emerald-700",Cancelled:"bg-rose-100 text-rose-600"};function k({projects:a=[],selectedProjectId:d,onSelect:k=()=>{},onCreate:l=async()=>{},onDelete:m=()=>{},onProgressUpdate:n=async()=>{},busyProjectIds:o=new Set}){let[p,q]=(0,c.useState)({name:"",studio:"Core Studio",dueDate:"",color:"#1d4ed8"}),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)({}),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(""),z=(0,c.useMemo)(()=>x.trim()?a.filter(a=>a.name?.toLowerCase().includes(x.trim().toLowerCase())):a,[a,x]),A=(0,c.useMemo)(()=>{if(!a.length)return{average:0,active:0,completed:0};let b=a.filter(a=>"Completed"===a.status).length,c=a.length-b;return{average:Math.round(a.reduce((a,b)=>a+(b.progress||0),0)/a.length),active:c,completed:b}},[a]),B=async a=>{if(a.preventDefault(),p.name.trim())try{w(!0),await l(p),q({name:"",studio:"Core Studio",dueDate:"",color:"#1d4ed8"}),s(!1)}finally{w(!1)}},C=async a=>{let b=t[a];if(void 0!==b)try{await n(a,b)}finally{u(b=>{let c={...b};return delete c[a],c})}};return(0,b.jsxs)("section",{className:"surface-card space-y-6",children:[(0,b.jsxs)("header",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.35em] text-slate-400",children:"Projects"}),(0,b.jsx)("h2",{className:"mt-2 text-3xl font-semibold text-slate-900",children:"Manage ongoing briefs"}),(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"Track each client engagement, progress, and handover dates in one place."})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 px-4 py-2 text-right",children:[(0,b.jsx)("p",{className:"text-[10px] uppercase tracking-[0.35em] text-slate-400",children:"Active"}),(0,b.jsx)("p",{className:"text-2xl font-semibold text-slate-900",children:A.active})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 px-4 py-2 text-right",children:[(0,b.jsx)("p",{className:"text-[10px] uppercase tracking-[0.35em] text-slate-400",children:"Avg. Progress"}),(0,b.jsxs)("p",{className:"text-2xl font-semibold text-slate-900",children:[A.average,"%"]})]}),(0,b.jsxs)("button",{type:"button",className:"btn-primary text-sm",onClick:()=>s(a=>!a),children:[(0,b.jsx)(e,{size:16}),r?"Close":"Add project"]})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,b.jsxs)("div",{className:"relative flex-1 min-w-[220px]",children:[(0,b.jsx)(f,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),(0,b.jsx)("input",{className:"w-full border-slate-200 pl-10",placeholder:"Search projects",value:x,onChange:a=>y(a.target.value)})]}),(0,b.jsxs)("button",{type:"button",className:"btn-secondary text-sm",children:[(0,b.jsx)(g,{size:16}),"Filter"]})]}),(0,b.jsx)("div",{className:"overflow-hidden rounded-2xl border border-slate-200 bg-white",children:(0,b.jsxs)("table",{className:"table-card text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Project name"}),(0,b.jsx)("th",{children:"Status"}),(0,b.jsx)("th",{children:"Progress"}),(0,b.jsx)("th",{children:"Tasks"}),(0,b.jsx)("th",{children:"Due"}),(0,b.jsx)("th",{children:"Actions"})]})}),(0,b.jsx)("tbody",{children:z.length?z.map(a=>{var c;let e=a._id===d,f=t[a._id]??a.progress??0,g=o?.has?.(a._id)??!1;return(0,b.jsxs)("tr",{className:(0,i.default)("cursor-pointer transition hover:bg-slate-50",e&&"bg-slate-50"),onClick:()=>k(a._id),children:[(0,b.jsxs)("td",{children:[(0,b.jsx)("div",{className:"font-semibold text-slate-900",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:a.studio||"Studio TBD"})]}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:(0,i.default)("status-pill",j[a.status]||"bg-slate-100 text-slate-600"),children:a.status})}),(0,b.jsxs)("td",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-2 flex-1 rounded-full bg-slate-100",children:(0,b.jsx)("div",{className:"h-full rounded-full bg-blue-500",style:{width:`${f}%`}})}),(0,b.jsxs)("span",{className:"w-12 text-right text-xs text-slate-500",children:[f,"%"]})]}),(0,b.jsx)("input",{type:"range",min:0,max:100,value:f,onChange:b=>{var c,d;return c=a._id,d=Number(b.target.value),void u(a=>({...a,[c]:d}))},onMouseUp:()=>C(a._id),onTouchEnd:()=>C(a._id),className:"mt-2 w-full accent-blue-500"}),g&&(0,b.jsx)("p",{className:"text-xs text-blue-500",children:"Updating…"})]}),(0,b.jsxs)("td",{children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-slate-900",children:[a.taskSummary?.completed||0,"/",a.taskSummary?.total||0]}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"tasks complete"})]}),(0,b.jsx)("td",{children:(0,b.jsx)("p",{className:"text-sm text-slate-900",children:(c=a.dueDate)?new Intl.DateTimeFormat("en",{month:"short",day:"numeric"}).format(new Date(c)):"No deadline"})}),(0,b.jsx)("td",{children:(0,b.jsx)("button",{type:"button",onClick:b=>{b.stopPropagation(),m(a._id)},className:"rounded-full border border-slate-200 p-2 text-slate-400 hover:border-rose-200 hover:text-rose-500",children:(0,b.jsx)(h,{size:14})})})]},a._id)}):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"py-10 text-center text-slate-500",children:"No projects yet. Use the button above to add your first project."})})})]})}),r&&(0,b.jsxs)("form",{id:"project-create",onSubmit:B,className:"grid gap-4 rounded-2xl border border-slate-200 bg-slate-50/60 p-5 md:grid-cols-2",children:[(0,b.jsxs)("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Project name",(0,b.jsx)("input",{required:!0,placeholder:"Seaside Villa",value:p.name,onChange:a=>q(b=>({...b,name:a.target.value}))})]}),(0,b.jsxs)("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Studio",(0,b.jsx)("input",{placeholder:"Core Studio",value:p.studio,onChange:a=>q(b=>({...b,studio:a.target.value}))})]}),(0,b.jsxs)("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Due date",(0,b.jsx)("input",{type:"date",value:p.dueDate,onChange:a=>q(b=>({...b,dueDate:a.target.value}))})]}),(0,b.jsxs)("label",{className:"flex flex-col gap-1 text-sm text-slate-600",children:["Accent color",(0,b.jsx)("input",{type:"color",className:"h-11 cursor-pointer rounded-xl border border-slate-200",value:p.color,onChange:a=>q(b=>({...b,color:a.target.value}))})]}),(0,b.jsx)("div",{className:"md:col-span-2 flex justify-end",children:(0,b.jsxs)("button",{type:"submit",disabled:v,className:"btn-primary",children:[(0,b.jsx)(e,{size:16}),v?"Creating…":"Create project"]})})]})]})}a.s(["default",()=>k],3043)}];

//# sourceMappingURL=_3242ad1f._.js.map